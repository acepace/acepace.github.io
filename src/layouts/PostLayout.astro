---
import BaseLayout from './BaseLayout.astro';
import type { CollectionEntry } from 'astro:content';
import { formatDate, getPostPermalink } from '../utils/blog';

interface Props {
  post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;
const canonical = new URL(getPostPermalink(post), Astro.site).toString();
---

<BaseLayout
  title={`${post.data.title} | Musing on random technical subjects`}
  description={post.data.description ?? post.data.title}
  canonical={canonical}
  ogType="article"
>
  <article class="card post-content">
    <h1>{post.data.title}</h1>
    <p class="post-meta">
      <time datetime={post.data.date.toISOString()}>{formatDate(post.data.date)}</time>
    </p>
    {post.data.tags.length > 0 && (
      <div class="tag-list">
        {post.data.tags.map((tag) => (
          <a class="tag" href={`/tags/${encodeURIComponent(tag)}/`}>{tag}</a>
        ))}
      </div>
    )}
    <slot />
  </article>
</BaseLayout>
